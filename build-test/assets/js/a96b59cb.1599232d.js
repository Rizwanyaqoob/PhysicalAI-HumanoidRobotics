"use strict";(globalThis.webpackChunkhumanoid_robotics_docs=globalThis.webpackChunkhumanoid_robotics_docs||[]).push([[100],{650:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"ros2/index","title":"ROS 2 - The Robotic Nervous System","description":"Learn about the Robot Operating System 2 architecture and programming for humanoid robotics","source":"@site/docs/ros2/index.md","sourceDirName":"ros2","slug":"/docs/ros2","permalink":"/docs/docs/ros2","draft":false,"unlisted":false,"editUrl":"https://github.com/Rizwanyaqoob/Humanoid-Robotics-A-Practical-Introduction/tree/master/docs/ros2/index.md","tags":[],"version":"current","frontMatter":{"title":"ROS 2 - The Robotic Nervous System","description":"Learn about the Robot Operating System 2 architecture and programming for humanoid robotics","slug":"/docs/ros2"},"sidebar":"tutorialSidebar","previous":{"title":"Robotics Foundations","permalink":"/docs/docs/foundations"},"next":{"title":"ROS 2 - The Robotic Nervous System","permalink":"/docs/docs/ros2"}}');var r=i(4848),t=i(8453);const o={title:"ROS 2 - The Robotic Nervous System",description:"Learn about the Robot Operating System 2 architecture and programming for humanoid robotics",slug:"/docs/ros2"},l="ROS 2 - The Robotic Nervous System",a={},c=[{value:"Motivation",id:"motivation",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Architecture Components",id:"architecture-components",level:3},{value:"Communication Patterns",id:"communication-patterns",level:3},{value:"Practical Examples",id:"practical-examples",level:2},{value:"Basic rclpy Node Implementation",id:"basic-rclpy-node-implementation",level:3},{value:"Publisher/Subscriber Pattern",id:"publishersubscriber-pattern",level:3},{value:"Publisher Node",id:"publisher-node",level:4},{value:"Subscriber Node",id:"subscriber-node",level:4},{value:"Code Blocks",id:"code-blocks",level:2},{value:"Services Implementation",id:"services-implementation",level:3},{value:"Service Server",id:"service-server",level:4},{value:"Service Client",id:"service-client",level:4},{value:"Actions for Long-Running Tasks",id:"actions-for-long-running-tasks",level:3},{value:"Action Server",id:"action-server",level:4},{value:"Parameters for Configuration",id:"parameters-for-configuration",level:3},{value:"Launch Files for System Deployment",id:"launch-files-for-system-deployment",level:3},{value:"ROS 2 System Architecture Visualization",id:"ros-2-system-architecture-visualization",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Quiz",id:"quiz",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-2---the-robotic-nervous-system",children:"ROS 2 - The Robotic Nervous System"})}),"\n",(0,r.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 (Robot Operating System 2) serves as the communication backbone for humanoid robotics applications. It provides a flexible framework for developing robot software by enabling distributed computation, standardized message passing, and modular architecture. Understanding ROS 2 is crucial for building complex humanoid robots that require coordination between multiple sensors, actuators, and control systems."}),"\n",(0,r.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"architecture-components",children:"Architecture Components"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nodes"}),": Individual processes that perform computation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics"}),": Named buses for publish/subscribe communication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),": Synchronous request/response communication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Actions"}),": Asynchronous request/goal/future communication for long-running tasks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),": Configuration values accessible across nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DDS (Data Distribution Service)"}),": Underlying communication middleware"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"communication-patterns",children:"Communication Patterns"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publisher/Subscriber"}),": Asynchronous data streaming"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Client/Server"}),": Synchronous request/response"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Action Client/Server"}),": Asynchronous goal-oriented communication with feedback"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,r.jsx)(n.h3,{id:"basic-rclpy-node-implementation",children:"Basic rclpy Node Implementation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_publisher = MinimalPublisher()\n\n    rclpy.spin(minimal_publisher)\n\n    # Destroy the node explicitly\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"publishersubscriber-pattern",children:"Publisher/Subscriber Pattern"}),"\n",(0,r.jsx)(n.h4,{id:"publisher-node",children:"Publisher Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass Publisher(Node):\n\n    def __init__(self):\n        super().__init__('publisher')\n        self.publisher = self.create_publisher(String, 'chatter', 10)\n        timer_period = 0.5\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello from publisher'\n        self.publisher.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n\ndef main():\n    rclpy.init()\n    publisher = Publisher()\n    rclpy.spin(publisher)\n    publisher.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h4,{id:"subscriber-node",children:"Subscriber Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass Subscriber(Node):\n\n    def __init__(self):\n        super().__init__('subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'chatter',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main():\n    rclpy.init()\n    subscriber = Subscriber()\n    rclpy.spin(subscriber)\n    subscriber.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"code-blocks",children:"Code Blocks"}),"\n",(0,r.jsx)(n.h3,{id:"services-implementation",children:"Services Implementation"}),"\n",(0,r.jsx)(n.h4,{id:"service-server",children:"Service Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass AddTwoIntsServer(Node):\n\n    def __init__(self):\n        super().__init__('add_two_ints_server')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n\ndef main():\n    rclpy.init()\n    add_two_ints_server = AddTwoIntsServer()\n    rclpy.spin(add_two_ints_server)\n    add_two_ints_server.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h4,{id:"service-client",children:"Service Client"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import sys\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass AddTwoIntsClient(Node):\n\n    def __init__(self):\n        super().__init__('add_two_ints_client')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n\n    def send_request(self, a, b):\n        self.req.a = a\n        self.req.b = b\n        future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, future)\n        return future.result()\n\ndef main():\n    rclpy.init()\n    add_two_ints_client = AddTwoIntsClient()\n    response = add_two_ints_client.send_request(int(sys.argv[1]), int(sys.argv[2]))\n    add_two_ints_client.get_logger().info(\n        'Result of add_two_ints: for %d + %d = %d' %\n        (int(sys.argv[1]), int(sys.argv[2]), response.sum))\n    add_two_ints_client.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"actions-for-long-running-tasks",children:"Actions for Long-Running Tasks"}),"\n",(0,r.jsx)(n.p,{children:"Actions are used for long-running tasks that may be canceled and provide feedback:"}),"\n",(0,r.jsx)(n.h4,{id:"action-server",children:"Action Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionServer(Node):\n\n    def __init__(self):\n        super().__init__('fibonacci_action_server')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            'fibonacci',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing goal...')\n\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        for i in range(1, goal_handle.request.order):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info('Goal canceled')\n                return Fibonacci.Result()\n\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n\n            goal_handle.publish_feedback(feedback_msg)\n            self.get_logger().info(f'Feedback: {feedback_msg.sequence}')\n\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        self.get_logger().info(f'Result: {result.sequence}')\n        return result\n\ndef main():\n    rclpy.init()\n    fibonacci_action_server = FibonacciActionServer()\n    rclpy.spin(fibonacci_action_server)\n    fibonacci_action_server.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"parameters-for-configuration",children:"Parameters for Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass ParameterNode(Node):\n\n    def __init__(self):\n        super().__init__('parameter_node')\n\n        # Declare parameters with default values\n        self.declare_parameter('robot_name', 'my_robot')\n        self.declare_parameter('max_velocity', 1.0)\n        self.declare_parameter('safety_mode', True)\n\n        # Access parameter values\n        robot_name = self.get_parameter('robot_name').value\n        max_velocity = self.get_parameter('max_velocity').value\n        safety_mode = self.get_parameter('safety_mode').value\n\n        self.get_logger().info(f'Robot name: {robot_name}')\n        self.get_logger().info(f'Max velocity: {max_velocity}')\n        self.get_logger().info(f'Safety mode: {safety_mode}')\n\ndef main():\n    rclpy.init()\n    parameter_node = ParameterNode()\n    rclpy.spin(parameter_node)\n    parameter_node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"launch-files-for-system-deployment",children:"Launch Files for System Deployment"}),"\n",(0,r.jsx)(n.p,{children:"Launch files allow you to start multiple nodes with a single command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='demo_nodes_py',\n            executable='listener',\n            name='listener',\n            parameters=[\n                {'use_sim_time': True}\n            ],\n            remappings=[\n                ('chatter', 'my_topic')\n            ]\n        ),\n        Node(\n            package='demo_nodes_py',\n            executable='talker',\n            name='talker',\n            parameters=[\n                {'use_sim_time': True}\n            ]\n        )\n    ])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ros-2-system-architecture-visualization",children:"ROS 2 System Architecture Visualization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[Node: Publisher] --\x3e|topic: chatter| B[Node: Subscriber]\n    C[Node: Parameter Server] -.-> A\n    C -.-> B\n    D[Node: Service Server] -.->|service: add_two_ints| E[Node: Service Client]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:"Common ROS 2 issues in humanoid robotics:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Network configuration"}),": DDS communication issues across different machines"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Time synchronization"}),": Issues with simulation time vs real time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource management"}),": Memory leaks in long-running nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Message type compatibility"}),": Incompatible message definitions between nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node lifecycle"}),": Proper initialization and cleanup of resources"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quiz",children:"Quiz"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"What is the difference between a ROS 2 service and an action?"}),"\n",(0,r.jsx)(n.li,{children:"How does DDS enable communication in ROS 2?"}),"\n",(0,r.jsx)(n.li,{children:"When should you use parameters vs topics for configuration?"}),"\n",(0,r.jsx)(n.li,{children:"What are the advantages of using launch files in humanoid robotics systems?"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.p,{children:["Continue to the ",(0,r.jsx)(n.a,{href:"../digital-twin/",children:"Digital Twin"})," section to learn about simulation environments that work with ROS 2 for testing humanoid robots."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);