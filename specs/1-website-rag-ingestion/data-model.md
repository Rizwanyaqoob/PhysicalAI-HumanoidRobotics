# Data Model: Website Content Extraction and RAG Ingestion Pipeline

## Core Entities

### WebsitePage
Represents a single page from the Docusaurus site
- **url** (string): The full URL of the page
- **title** (string): The extracted title of the page
- **content** (string): The cleaned text content of the page
- **crawl_status** (enum): success, failed, skipped
- **crawl_timestamp** (datetime): When the page was crawled

### TextChunk
Represents a segment of extracted content that fits within embedding model constraints
- **id** (string): Unique identifier for the chunk
- **content** (string): The text content of the chunk (500-1000 tokens)
- **page_url** (string): Reference to the source page URL
- **chunk_index** (integer): Position of the chunk within the source page
- **metadata** (object): Additional metadata including title, section, etc.

### VectorEmbedding
Represents the numerical representation of a text chunk generated by Cohere
- **vector_id** (string): Unique identifier for the vector
- **chunk_id** (string): Reference to the source text chunk
- **embedding** (array[float]): The numerical vector representation
- **page_url** (string): Reference to the original page URL
- **metadata** (object): Associated metadata for retrieval context

### CrawlResult
Represents the result of a crawling operation
- **total_pages_found** (integer): Total number of URLs discovered
- **pages_crawled** (integer): Number of pages successfully crawled
- **pages_failed** (integer): Number of pages that failed to crawl
- **start_time** (datetime): When crawling started
- **end_time** (datetime): When crawling completed
- **summary** (string): Summary of crawling results

### EmbeddingResult
Represents the result of an embedding operation
- **total_chunks** (integer): Total number of text chunks processed
- **successful_embeddings** (integer): Number of successful embeddings
- **failed_embeddings** (integer): Number of failed embeddings
- **start_time** (datetime): When embedding started
- **end_time** (datetime): When embedding completed
- **summary** (string): Summary of embedding results

## Relationships

1. **WebsitePage** → **TextChunk** (one-to-many)
   - One page can be chunked into multiple text chunks

2. **TextChunk** → **VectorEmbedding** (one-to-one)
   - One text chunk generates one vector embedding

## Validation Rules

1. **WebsitePage.url** must be a valid URL format
2. **TextChunk.content** must be between 500-1000 tokens
3. **VectorEmbedding.embedding** must match the expected dimensions for the Cohere model
4. **WebsitePage.content** must not be empty when crawl_status is "success"

## State Transitions

1. **WebsitePage**:
   - Initial → Crawling (when crawl starts)
   - Crawling → Success/Failed (when crawl completes)

2. **TextChunk**:
   - Created → Processed → Embedded (sequential processing states)